
@{
    ViewData["Title"] = "Index";
}
<div id="BlogIndex">
    <section class="panel">
        <header class="panel-heading tab-bg-dark-navy-blue">
            <ul class="nav nav-tabs" id="BlogTab">
                <li class="active">
                    <a data-toggle="tab" href="#BlogList">
                        <i class="icon-home"></i>
                        博客列表
                    </a>
                </li>
                <li>
                    <a data-toggle="tab" href="#BlogDetail">
                        <i class="icon-user"></i>
                        博客预览
                    </a>
                </li>
                <li class="">
                    <a data-toggle="tab" href="#contact-2">
                        <i class="icon-envelope"></i>
                        博客设置
                    </a>
                </li>
            </ul>
        </header>
        <div class="panel-body">
            <div class="tab-content">
                <div id="BlogList" class="tab-pane active">
                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <header class="panel-heading">
                                    <button type="button" class="btn btn-info">添加博客</button>
                                </header>
                                <div class="adv-table">
                                    <table class="table table-striped table-advance table-bordered">
                                        <thead>
                                            <tr>
                                                <th><i></i> No</th>
                                                <th><i class="icon-question-sign"></i>Title</th>
                                                <th><i class="icon-bookmark"></i> PostTime</th>
                                                <th><i class=" icon-edit"></i> UpdateTime</th>
                                                <th>Count</th>
                                                <th>操作</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr v-for="Article in ArticleList">
                                                <td ></td>
                                                <td><a href="#">{{Article.title}}</a></td>
                                                <td>{{Article.postTime}}</td>
                                                <td>{{Article.updateTime}}</td>
                                                <td>{{Article.count}}</td>
                                                <td>
                                                    <button class="btn btn-primary btn-xs"><i class="icon-pencil"></i></button>
                                                    <button class="btn btn-danger btn-xs"><i class="icon-trash "></i></button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                总记录数<span data-bind="text:RecordCount"></span>&nbsp;&nbsp;&nbsp;每页显示记录数<span data-bind="text:pageSize"></span>
                                <section class="panel">
                                    <ul class=" pagination" style="float: left;">
                                        <li data-bind="css: { disabled: pageIndex() === 1 }"><a href="#" data-bind="click: previousPage">Previous</a></li>
                                    </ul>
                                    <ul class=" pagination" style="float:left; " data-bind="foreach: allPages">
                                        <li data-bind="css: { active: $data.pageNumber === ($root.pageIndex()) }">
                                            <a href="#" data-bind="text: $data.pageNumber, click: function() { $root.moveToPage($data.pageNumber); }"></a>
                                        </li>
                                    </ul>
                                    <ul class=" pagination" style="float: left;">
                                        <li data-bind="css: { disabled: pageIndex() === maxPageIndex() }"><a href="#" data-bind="click: nextPage">Next</a></li>
                                    </ul>
                                </section>
                            </section>
                        </div>
                    </div>
                </div>
                <div id="BlogDetail" class="tab-pane">
                    <h2><span data-bind="text:Title"></span></h2>
                    <br />
                    <span data-bind="text: PostTime"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span data-bind="text: UpdateTime"></span>
                    <span data-bind="html:Content"></span>
                </div>
                <div id="contact-2" class="tab-pane ">Set</div>
            </div>
        </div>
    </section>
</div>

<div style="height: 55px;"></div>
<script src="~/lib/axios/dist/axios.min.js"></script>
<script src="~/lib/vue/dist/vue.js"></script>
<script type="text/javascript">
    function ChangeDateFormat(jsondate) {
        if (jsondate === "") { return ""; }
        jsondate = jsondate.replace("/Date(", "").replace(")/", "");
        if (jsondate.indexOf("+") > 0) {
            jsondate = jsondate.substring(0, jsondate.indexOf("+"));
        }
        else if (jsondate.indexOf("-") > 0) {
            jsondate = jsondate.substring(0, jsondate.indexOf("-"));
        }
        var date = new Date(parseInt(jsondate, 10));
        var month = date.getMonth() + 1 < 10 ? "0" + (date.getMonth() + 1) : date.getMonth() + 1;
        var currentDate = date.getDate() < 10 ? "0" + date.getDate() : date.getDate();
        var hours = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
        var minutes = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
        var seconds = date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();
        return date.getFullYear()
            + "年"
            + month
            + "月"
            + currentDate
            + "日"
            + " "
            + hours
            + ":"
            + minutes
            + ":"
            + seconds;
    }


    var articleList = [];
    axios.get('http://localhost:5001/api/Blog/Article/1')
        .then(function (response) {
            console.log(response);
            articleList = response.data.articleList;
            var vm = new Vue({
                el: '#BlogIndex',
                data: {
                    ArticleList: articleList
                }
            });

            console.log(articleList);
        })
        .catch(function (response) {
            console.log(response);
        });




</script>

