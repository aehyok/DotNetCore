
@{
    ViewData["Title"] = "RoleIndex";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

<a href="../RoleAdmin/Create" class="btn btn-primary green">Create</a>
<div class="row" style="margin-top: 15px;" id="TagList">
    <div class="col-md-12">
        <!-- BEGIN SAMPLE TABLE PORTLET-->
        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-cogs"></i>Admin User List
                </div>
            </div>
            <div class="portlet-body">
                <div class="table-scrollable">
                    <table class="table table-striped table-bordered table-hover">
                        <thead>
                            <tr>
                                @*<th scope="col" style="width:650px !important">Id </th>*@
                                <th scope="col">Name</th>
                                <th scope="col"> Users </th>
                                <th scope="col">Operation</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="(item,index) in RoleList">
                                <td>{{index+1}}</td>
                                <td>{{item.Name}}</td>
                                <td>{{item.Users}}</td>
                                <td>
                                    <button class="btn btn-primary btn-xs" v-on:click="edit(index,item)"><i class="icon-pencil"></i></button>
                                    <button class="btn btn-danger btn-xs" v-on:click="deleteRole(index,item)"><i class="icon-trash "></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!-- END SAMPLE TABLE PORTLET-->
    </div>
</div>

<script>
    var url = "http://localhost:5001/api/System/Role";
    window.onload = function ()
    {
        var vue = new Vue({
            el: "#TagList",
            data: {
                RoleList: [],//空的初始化数据

                //总项目数
                totalCount: 200,
                //分页数
                pageCount: 20,
                //当前页面
                pageCurrent: 1,
                //分页大小
                pageSize: 8,
                //显示分页按钮数
                showPages: 11,
                //开始显示的分页按钮
                showPagesStart: 1,
                //结束显示的分页按钮
                showPageEnd: 100,
                newTodo: { id: null, Name: '', Task: false }//新建默认数据
            },
            mounted() {
                this.getData(url);//通过this.getData的URL取得API数据
                //this.showPage(1, null, true);
            },
            computed: {
                remaining: function () {
                    return this.totalCount;
                }
            },//这里我们声明了一个计算属性 remaining,通过返回this.num的值做为未完成总数
            methods: {//VUE事件处理器
                getData(url) {
                    this.$http.get(url).then((response) => {
                        this.RoleList = response.data;
                    });
                },//this.getData取得数据库数据，并取得未完成事件总数

                edit(index, item) {
                    var url = "../Blog/AddTag?menuId=BlogAddTag&type=header&id=" + item.id;
                    window.open(url, "_self", "", false);
                    console.log("index" + index);
                },
                
                delete(index, item) {
                    //var tempUrl =  item.id;
                    ////this.$http.delete(tempUrl).then((response) => {
                    ////    toastr.success("删除成功！");
                    ////    this.getTagData(tagListUrl, this.pageCurrent, this.pagesize);
                    ////});
                    ////console.log("index" + index);
                }
                
            },//完成任务或者撤销任务
        });
    }
</script>
